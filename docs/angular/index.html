<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>KPC组件库</title><meta content="KPC, KingDesign, 组件库, 前端框架, Vue, Angular, React, Intact" name="keywords"/><meta content="KPC，支持多框架的前端高质量组件库" name="description"/><link rel="shortcut icon" href="/imgs/favicon.ico" type="image/x-icon"/><link href="//damife.ks3-cn-beijing.ksyun.com/kpc/theme-kpc.1.4.4.css" rel="stylesheet"></head><body><div id="page"><div class="k-app"><div class="main-wrapper document-page fixed-aside"><div class="header-wrapper header-shadow"><header><div class="king-logo"><a class="logo"></a><a class="king">KPC</a></div><div class="right"><nav><a>资源</a><a>设计</a><a class="active">组件</a><a>Blog</a><a>定制主题</a><div class="border"></div></nav><button class="k-btn k-none k-btn-icon menu-btn" _evHasSaved tabindex="0" type="button"><i class="k-icon ion-navicon k-large" style=""></i></button><!--placeholder--><div class="line"></div><div class="k-select k-with-suffix k-inline k-has-value" style="" tabindex="0"><div class="k-wrapper" tabindex="-1" _evHasSaved><div class="k-main"><input type="hidden" value="kpc" /><span class="k-value c-ellipsis">默认主题</span></div><span class="k-suffix"><span class="k-suffix-icon"><i class="k-arrow ion-arrow-down-b"></i></span></span></div><!--placeholder--></div></div></header></div><div class="content-wrapper"><aside><div class="aside-wrapper"><div class="catalog-section"><ul><li><a>Intact中使用</a></li><li><a>Vue中使用</a></li><li><a>React中使用</a></li><li class="active"><a>Angular中使用</a></li><li><a>定制主题</a></li><li><a>国际化</a></li><li><a>默认事件</a></li><li><a><div class="k-badge">更新日志</div></a></li></ul></div><div class="catalog-section"><h5>组件</h5><ul><li><a>Affix<span>图钉</span></a></li><li><a>App<span>应用管理</span></a></li><li><a>Badge<span>徽标</span></a></li><li><a>Breadcrumb<span>面包屑</span></a></li><li><a>Button<span>按钮</span></a></li><li><a>Card<span>卡片</span></a></li><li><a>Carousel<span>走马灯</span></a></li><li><a>Cascader<span>级联选择</span></a></li><li><a>Checkbox<span>复选框</span></a></li><li><a>Code<span>代码编辑器</span></a></li><li><a>Collapse<span>折叠面板</span></a></li><li><a>Colorpicker<span>拾色器</span></a></li><li><a>Datepicker<span>日期选择</span></a></li><li><a>Diagram<span>绘图</span></a></li><li><a>Dialog<span>弹窗</span></a></li><li><a>Drawer<span>抽屉</span></a></li><li><a>Dropdown<span>下拉菜单</span></a></li><li><a>Editable<span>可编辑文本</span></a></li><li><a>Form<span>表单</span></a></li><li><a>Grid<span>栅格</span></a></li><li><a>Icon<span>字体图标</span></a></li><li><a>Input<span>输入框</span></a></li><li><a>Layout<span>布局</span></a></li><li><a>Menu<span>菜单</span></a></li><li><a>Message<span>全局提示</span></a></li><li><a>Pagination<span>分页</span></a></li><li><a>Progress<span>进度条</span></a></li><li><a>Radio<span>单选框</span></a></li><li><a>Rate<span>评分</span></a></li><li><a>ScrollSelect<span>滚动选择框</span></a></li><li><a>Select<span>选择框</span></a></li><li><a>Slider<span>滑块</span></a></li><li><a>Spin<span>加载中</span></a></li><li><a>Spinner<span>数字输入框</span></a></li><li><a>Split<span>分割面板</span></a></li><li><a>Steps<span>步骤条</span></a></li><li><a>Switch<span>开关</span></a></li><li><a>Table<span>表格</span></a></li><li><a>Tabs<span>选项卡</span></a></li><li><a>Tag<span>标签</span></a></li><li><a>Timeline<span>时间轴</span></a></li><li><a>Timepicker<span>时间选择</span></a></li><li><a>Tip<span>警告提示</span></a></li><li><a>Tooltip<span>提示弹层</span></a></li><li><a>Transfer<span>穿梭框</span></a></li><li><a>Tree<span>树形控件</span></a></li><li><a>TreeSelect<span>下拉树选择</span></a></li><li><a>Upload<span>上传</span></a></li></ul></div><div class="aside-border transition"></div></div><button class="k-btn k-default k-btn-icon" tabindex="0" type="button"><i class="k-icon ion-android-menu"></i></button></aside><article><div class="article-head"><div class="title">Angular中使用</div><div class="edit-link">
                    如果你发现文档有问题，请帮忙在
                    <a target="_blank" href="https://github.com/ksc-fe/kpc/blob/master/docs/angular">github</a>
                    上修正该文档
                </div></div><div class="contents"><div class="api"><div><blockquote>
<p>目前KPC并没有TypeScript类型声明，所以你需要将KPC组件转为<code>any</code>类型</p>
<p>所有组件都已在<code>Angular@8</code>下测试通过</p>
</blockquote>
<h1 id='%E5%AE%89%E8%A3%85'>安装</h1><pre><code class="hljs js">npm <span class="hljs-keyword">install</span> kpc-angular -S</code></pre>
<h1 id='Angular%20CLI'>Angular CLI</h1><p>使用<code>@angular/cli</code>可以轻松地初始化Angular项目，但是由于<code>KPC</code>并非通过<code>Angular</code>编写，它引入样式的方式并非<code>styleUrl</code>，而是直接<code>import</code>，所以我们需要额外配置<code>webpack</code>。</p>
<h2 id='%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96'>安装和初始化</h2><pre><code class="hljs shell"><span class="hljs-built_in">npm</span> install -g @angular/cli
ng <span class="hljs-keyword">new</span> my-app
cd my-app
<span class="hljs-built_in">npm</span> install kpc-angular -S</code></pre>
<h2 id='%E9%85%8D%E7%BD%AEwebpack'>配置<code>webpack</code></h2><p>要配置Angular CLI初始化的项目的<code>webapck</code>，我们需要安装<code>@angular-builders/custom-webpack</code>，然后修改<code>angular.json</code></p>
<pre><code class="hljs shell"><span class="hljs-built_in">npm</span> install @angular-builders/custom-webpack -D</code></pre>
<p>修改<code>angular.json</code></p>
<pre><code class="hljs diff">--- a/angular.json
+++ b/angular.json
@@ <span class="hljs-number">-15</span>,<span class="hljs-number">8</span> +<span class="hljs-number">15</span>,<span class="hljs-number">11</span> @@
       <span class="hljs-string">"prefix"</span>: <span class="hljs-string">"app"</span>,
       <span class="hljs-string">"architect"</span>: {
         <span class="hljs-string">"build"</span>: {
-          <span class="hljs-string">"builder"</span>: <span class="hljs-string">"@angular-devkit/build-angular:browser"</span>,
+          <span class="hljs-string">"builder"</span>: <span class="hljs-string">"@angular-builders/custom-webpack:browser"</span>,
           <span class="hljs-string">"options"</span>: {
+            <span class="hljs-string">"customWebpackConfig"</span>: {
+              <span class="hljs-string">"path"</span>: <span class="hljs-string">"./webpack.config.js"</span>
+            },
             <span class="hljs-string">"outputPath"</span>: <span class="hljs-string">"dist/my-app"</span>,
             <span class="hljs-string">"index"</span>: <span class="hljs-string">"src/index.html"</span>,
             <span class="hljs-string">"main"</span>: <span class="hljs-string">"src/main.ts"</span>,
@@ <span class="hljs-number">-65</span>,<span class="hljs-number">7</span> +<span class="hljs-number">68</span>,<span class="hljs-number">7</span> @@
           }
         },
         <span class="hljs-string">"serve"</span>: {
-          <span class="hljs-string">"builder"</span>: <span class="hljs-string">"@angular-devkit/build-angular:dev-server"</span>,
+          <span class="hljs-string">"builder"</span>: <span class="hljs-string">"@angular-builders/custom-webpack:dev-server"</span>,
           <span class="hljs-string">"options"</span>: {
             <span class="hljs-string">"browserTarget"</span>: <span class="hljs-string">"my-app:build"</span>
           },</code></pre>
<p>然后我们就可以在根目录下创建<code>webpack.config.js</code>来添加自定义配置了，我们需要将<code>KPC</code>组件引入的<code>css</code>文件直接通过<code>css-loader</code>处理</p>
<pre><code class="hljs js">const path = require(<span class="hljs-string">'path'</span>);

module.exports = function(config) {
  config.module.rules.<span class="hljs-builtin-name">find</span>(rule =&gt; {
    <span class="hljs-keyword">if</span> (rule.test.toString() === <span class="hljs-string">'/\\.css$/'</span>) {
      rule.exclude.push(path.resolve(__dirname, <span class="hljs-string">'node_modules/kpc-angular'</span>));
      return <span class="hljs-literal">true</span>;
    }
  });

  return<span class="hljs-built_in"> config;
</span>}</code></pre>
<h2 id='%E5%BC%95%E5%85%A5KPC%E7%BB%84%E4%BB%B6'>引入KPC组件</h2><p>为了使<code>KPC</code>组件正常工作，我们需要使用<code>KPC</code>提供的<code>KpcBrowserModule</code>替换<code>BrowserModule</code>，所以需要同时导入<code>KpcBrowserModule</code>和<code>KpcModule</code>两个模块给<code>AppModule</code>。另外，还需要引入<code>CUSTOM_ELEMENTS_SCHEMA</code>，来使Angular将<code>KPC</code>组件当做<code>Web Component</code>元素</p>
<pre><code class="hljs diff"><span class="hljs-comment">--- a/src/app/app.module.ts</span>
+++ b/src/app/app.<span class="hljs-built_in">module</span>.ts
@@ <span class="hljs-number">-1</span>,<span class="hljs-number">5</span> +<span class="hljs-number">1</span>,<span class="hljs-number">5</span> @@
-<span class="hljs-keyword">import</span> { BrowserModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/platform-browser'</span>;
-<span class="hljs-keyword">import</span> { NgModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
+<span class="hljs-keyword">import</span> { KpcBrowserModule, KpcModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'kpc-angular'</span>;
+<span class="hljs-keyword">import</span> { NgModule, CUSTOM_ELEMENTS_SCHEMA } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

 <span class="hljs-keyword">import</span> { AppRoutingModule } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app-routing.module'</span>;
 <span class="hljs-keyword">import</span> { AppComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;
@@ <span class="hljs-number">-9</span>,<span class="hljs-number">10</span> +<span class="hljs-number">9</span>,<span class="hljs-number">12</span> @@ <span class="hljs-keyword">import</span> { AppComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;
     AppComponent
   ],
   <span class="hljs-name">imports</span>: [
-    BrowserModule,
-    AppRoutingModule
+    KpcBrowserModule,
+    AppRoutingModule,
+    KpcModule
   ],
   <span class="hljs-name">providers</span>: [],
-  <span class="hljs-name">bootstrap</span>: [AppComponent]
+  <span class="hljs-name">bootstrap</span>: [AppComponent],
+  <span class="hljs-name">schemas</span>: [CUSTOM_ELEMENTS_SCHEMA]
 })
 <span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppModule</span> { }</span></code></pre>
<h2 id='%E4%BD%BF%E7%94%A8KPC%E7%BB%84%E4%BB%B6'>使用KPC组件</h2><p>至此，我们就可以愉快地使用<code>KPC</code>组件了</p>
<blockquote>
<p>需要注意的是，如果你要定义<code>KPC</code>组件的样式，你需要将<code>encapsulation</code>设为<code>ViewEncapsulation.None</code>，否则你将选择不到元素</p>
</blockquote>
<blockquote>
<p><code>KPC</code>提供的组件都以<code>k-</code>作为前缀，并且该前缀具有特殊用途，如果你要自定义组件，请避免使用该前缀</p>
</blockquote>
<pre><code class="hljs ts"><span class="hljs-keyword">import</span> { Component, ViewEncapsulation } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { MessageComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'kpc-angular'</span>;

@Component({
  <span class="hljs-name">selector</span>: <span class="hljs-string">'app-root'</span>,
  <span class="hljs-name">template</span>: `
    &lt;k-button <span class="hljs-built_in">type</span>=<span class="hljs-string">"primary"</span> (click)=<span class="hljs-string">"onClick()"</span>&gt;Hello World&lt;/k-button&gt;
  `,
  <span class="hljs-name">style</span>: `
    .k-button {
      <span class="hljs-name">margin</span>: <span class="hljs-number">10</span>px;
    }
  `,
  <span class="hljs-name">encapsulation</span>: ViewEncapsulation.None,
})
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> {</span>
  onClick() {
    MessageComponent.success(<span class="hljs-string">'Welcome to kpc world!'</span>);
  }
}</code></pre>
<h1 id='%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%A2%98'>修改主题</h1><p><code>KPC</code>组件库的样式文件使用<code>stylus</code>编写，使用主题前，我们需要修改<code>webpack</code>配置，让组件的<code>stylus</code>文件进过<code>stylus-loader</code>处理。此时我们需要<code>kpc-angular/@stylus</code>下的文件，不过也可以通过<code>alias</code>配置来保持引入路径统一</p>
<p>修改后的<code>webpack.config.js</code>文件如下</p>
<pre><code class="hljs js">const <span class="hljs-type">path</span> = require(<span class="hljs-string">'path'</span>);

module.exports = <span class="hljs-keyword">function</span>(config) {
  config.module.rules.find(<span class="hljs-keyword">rule</span> =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">rule</span>.test.toString() === <span class="hljs-string">'/\\.css$/'</span>) {
      <span class="hljs-keyword">rule</span>.<span class="hljs-keyword">exclude</span>.push(<span class="hljs-type">path</span>.resolve(__dirname, <span class="hljs-string">'node_modules/kpc-angular'</span>));
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
  });

  // <span class="hljs-keyword">if</span> you want <span class="hljs-keyword">to</span> use `ksyun` theme
  config.module.rules.find(<span class="hljs-keyword">rule</span> =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">rule</span>.test.toString() === <span class="hljs-string">'/\\.styl$/'</span>) {
      <span class="hljs-keyword">rule</span>.<span class="hljs-keyword">exclude</span>.push(<span class="hljs-type">path</span>.resolve(__dirname, <span class="hljs-string">'node_modules/kpc-angular'</span>));
      <span class="hljs-keyword">rule</span>.use.find(loader =&gt; {
        <span class="hljs-keyword">if</span> (loader.loader === <span class="hljs-string">'stylus-loader'</span>) {
          <span class="hljs-keyword">Object</span>.assign(loader.<span class="hljs-keyword">options</span>, {
            <span class="hljs-string">'resolve url'</span>: <span class="hljs-keyword">true</span>,
            <span class="hljs-string">'include css'</span>: <span class="hljs-keyword">true</span>,
            <span class="hljs-string">'import'</span>: <span class="hljs-type">path</span>.resolve(__dirname, <span class="hljs-string">'node_modules/kpc-angular/@stylus/styles/themes/ksyun/index.styl'</span>)
          });
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        }
      });
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
  });

  // <span class="hljs-keyword">set</span> <span class="hljs-keyword">alias</span>
  config.resolve.<span class="hljs-keyword">alias</span>[<span class="hljs-string">'kpc-angular'</span>] = <span class="hljs-string">'kpc-angular/@stylus'</span>;

  <span class="hljs-keyword">return</span> config;
}</code></pre>
</div></div></div></article><div class="table-of-contents"><ul></ul><div class="aside-dot transition" style="display:none"></div></div></div></div></div></div><script src="//damife.ks3-cn-beijing.ksyun.com/kpc/static/client.ea8151ac90303d6f2108.js"></script></body></html>